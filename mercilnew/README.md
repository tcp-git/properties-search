# Mercil AI Search Service

Python AI Service ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏î‡πâ‡∏ß‡∏¢ AI

## ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå

- ü§ñ **AI Intent Detection** - ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
- üîç **Vector Search** - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Embedding ‡πÅ‡∏•‡∏∞ ChromaDB
- üìä **Ranking** - ‡∏à‡∏±‡∏î‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

## üîÑ ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: ‡∏à‡∏≤‡∏Å CSV ‡∏™‡∏π‡πà Vector Database

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Pipeline)

```
1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö (Raw Data)
   ‚Üì
   data/assets_rows.csv
   - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô: ‡∏ä‡∏∑‡πà‡∏≠, ‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà, ‡∏û‡∏¥‡∏Å‡∏±‡∏î (lat/lon)
   - ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô, ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥, ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
   - ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î, ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß, ‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏Æ‡∏°

2. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• POI (Point of Interest)
   ‚Üì
   poi_fetcher.py ‚Üí Google Maps API
   - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ POI ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô (30+ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó)
   - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡πÄ‡∏°‡∏ï‡∏£) ‡∏à‡∏≤‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á POI
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô poi_results_enhanced.csv
   
   POI ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á:
   ‚Ä¢ Transportation: BTS, MRT, ‡∏£‡∏ñ‡πÑ‡∏ü, ‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå
   ‚Ä¢ Shopping: ‡∏´‡πâ‡∏≤‡∏á, ‡∏ï‡∏•‡∏≤‡∏î, 7-11, ‡∏ã‡∏∏‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏°‡∏≤‡∏£‡πå‡πÄ‡∏Å‡πá‡∏ï
   ‚Ä¢ Services: ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•, ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡πå
   ‚Ä¢ Lifestyle: ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà, ‡∏¢‡∏¥‡∏°, ‡∏™‡∏õ‡∏≤
   ‚Ä¢ Tourism: ‡∏ä‡∏≤‡∏¢‡∏´‡∏≤‡∏î, ‡∏ß‡∏±‡∏î, ‡∏û‡∏¥‡∏û‡∏¥‡∏ò‡∏†‡∏±‡∏ì‡∏ë‡πå, ‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏≠‡∏•‡πå‡∏ü

3. ‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Merge)
   ‚Üì
   assets_rows.csv + poi_results_enhanced.csv
   = assets_rows_merged_with_poi.csv
   
   ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô (id, name, price, location, ...)
   - ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á POI (bts_station: 500, hospital: 1200, ...)
   - ‡∏ä‡∏∑‡πà‡∏≠ POI (bts_station_name: "BTS ‡∏≠‡∏≤‡∏£‡∏µ‡∏¢‡πå", ...)

4. ‡∏™‡∏£‡πâ‡∏≤‡∏á Vector Database
   ‚Üì
   build_vectorstore.py
   
   ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:
   a) ‡∏≠‡πà‡∏≤‡∏ô assets_rows_merged_with_poi.csv
   
   b) ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Lifestyle Score (0-10)
      - ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á POI ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
      - ‡πÉ‡∏ä‡πâ POI Config (radius, weight, curve)
      - ‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏Å‡∏•‡πâ POI ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç = ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á
      
   c) ‡∏™‡∏£‡πâ‡∏≤‡∏á Text ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Embedding
      text = "‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"
      ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: "‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î ‡∏î‡∏¥ ‡πÄ‡∏≠‡∏™ ‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó | ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ä‡∏∏‡∏î | ‡πÉ‡∏Å‡∏•‡πâ BTS..."
      
   d) ‡πÅ‡∏õ‡∏•‡∏á Text ‚Üí Vector (Embedding)
      - ‡πÉ‡∏ä‡πâ Sentence Transformers (thenlper/gte-large)
      - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 1024 ‡∏°‡∏¥‡∏ï‡∏¥
      - Vector ‡∏ô‡∏µ‡πâ‡πÅ‡∏ó‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô
      
   e) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á ChromaDB
      ‚Üì
      npa_vectorstore/
      ‚îú‚îÄ‚îÄ chroma.sqlite3        # Database ‡∏´‡∏•‡∏±‡∏Å
      ‚îî‚îÄ‚îÄ [collection folders]  # Embeddings + Metadata
      
      ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö:
      ‚Ä¢ Embeddings (Vector 1024 ‡∏°‡∏¥‡∏ï‡∏¥)
      ‚Ä¢ Metadata (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å CSV)
        - id, name, price, location
        - asset_type_id (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç! ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏á)
        - ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á POI ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        - lifestyle_score
        - pet_friendly

5. ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á (Runtime)
   ‚Üì
   api_service.py + search_pipeline.py
   
   ‡πÄ‡∏°‡∏∑‡πà‡∏≠ User ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÉ‡∏Å‡∏•‡πâ BTS ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏•‡πâ‡∏≤‡∏ô":
   
   a) Intent Detection (LLM)
      ‚Üí { asset_types: ["‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î"], 
          must_have: ["bts_station"],
          price_range: { max: 3000000 } }
   
   b) Vector Search (ChromaDB)
      - ‡πÅ‡∏õ‡∏•‡∏á Query ‚Üí Vector
      - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Vector ‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (Semantic Search)
      - ‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå 100 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
   
   c) Filtering & Ranking
      - ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏° asset_type_id, price
      - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Intent Score (‡∏ï‡∏£‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏°?)
      - ‡∏£‡∏ß‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: Intent (70%) + Semantic (20%) + Lifestyle (10%)
      - ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Top 5
   
   d) RAG Explanation (LLM)
      - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
      - ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
   
   e) ‡∏™‡πà‡∏á Response ‡∏Å‡∏•‡∏±‡∏ö
```

### üí° ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Vector Database?

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏° (SQL LIKE):**
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
- "‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÉ‡∏Å‡∏•‡πâ BTS" ‚â† "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ä‡∏∏‡∏î‡πÉ‡∏Å‡∏•‡πâ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤" (‡πÅ‡∏°‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô)

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á Vector Search:**
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ (Semantic Understanding)
- "‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÉ‡∏Å‡∏•‡πâ BTS" ‚âà "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ä‡∏∏‡∏î‡πÉ‡∏Å‡∏•‡πâ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤" ‚âà "‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏∏‡∏î‡∏ï‡∏¥‡∏î BTS"
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÑ‡∏î‡πâ‡∏î‡∏µ

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:**
```
Query: "‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏£‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß"
‚Üí Vector: [0.23, -0.45, 0.67, ...]

‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô ChromaDB:
‚Üí ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß 4 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô (Vector ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á 0.89)
‚Üí ‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏ù‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏ß‡πâ‡∏≤‡∏á (Vector ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á 0.85)
‚Üí ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î 1 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô (Vector ‡∏´‡πà‡∏≤‡∏á 0.32) ‚ùå
```

## ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Virtual Environment
```bash
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # Mac/Linux
```

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies
```bash
pip install -r requirements.txt
```

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment (.env)
```env
MERCIL_API_KEY=your_secret_key_here
```

### 4. ‡∏£‡∏±‡∏ô Service
```bash
python api_service.py
```

Service ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà: `http://localhost:8000`

## API Endpoint

### Search
```
POST /api/v1/search
Authorization: Bearer YOUR_API_KEY
Content-Type: application/json

{
  "query": "‡∏´‡∏≤‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÉ‡∏Å‡∏•‡πâ BTS ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏•‡πâ‡∏≤‡∏ô",
  "filters": {}
}
```

### Response
```json
{
  "query": "‡∏´‡∏≤‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÉ‡∏Å‡∏•‡πâ BTS ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏•‡πâ‡∏≤‡∏ô",
  "intent_detected": {
    "property_type": "‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î",
    "near_bts": true,
    "price_max": 3000000
  },
  "results": [
    {
      "id": "prop_001",
      "name": "The Condo Sukhumvit",
      "price": 2800000,
      "score": 0.95
    }
  ]
}
```

## ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API

### Swagger UI
‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå: `http://localhost:8000/docs`

### cURL
```bash
curl -X POST http://localhost:8000/api/v1/search ^
  -H "Authorization: Bearer your_api_key" ^
  -H "Content-Type: application/json" ^
  -d "{\"query\":\"‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÉ‡∏Å‡∏•‡πâ BTS\",\"filters\":{}}"
```

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

### üìÇ ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å (Core Files)

#### üöÄ Service Files
- **`api_service.py`** - FastAPI Service ‡∏´‡∏•‡∏±‡∏Å
  - ‡∏£‡∏±‡∏ö HTTP Request ‡∏à‡∏≤‡∏Å Client
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Bearer Token Authentication
  - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ `search_pipeline.py` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
  - ‡∏™‡πà‡∏á Response ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô JSON

- **`search_pipeline.py`** - AI Search Logic ‡πÅ‡∏•‡∏∞ Ranking Engine
  - **Intent Detection**: ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ LLM (GPT-4o-mini)
  - **Vector Search**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Semantic Embedding ‡∏à‡∏≤‡∏Å ChromaDB
  - **Smart Ranking**: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å Intent Score, Semantic Score, Lifestyle Score
  - **RAG Explanation**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏î‡πâ‡∏ß‡∏¢ AI
  - **POI Matching**: ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö POI (BTS, ‡∏´‡πâ‡∏≤‡∏á, ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ‡∏Ø‡∏•‡∏Ø)

#### üîß Data Preparation Files
- **`build_vectorstore.py`** - ‡∏™‡∏£‡πâ‡∏≤‡∏á Vector Database
  - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å CSV (properties + POI)
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Lifestyle Score ‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á POI
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á Embeddings ‡∏î‡πâ‡∏ß‡∏¢ Sentence Transformers
  - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á ChromaDB ‡∏û‡∏£‡πâ‡∏≠‡∏° Metadata ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Asset Type Mapping ‡πÅ‡∏•‡∏∞ Pet-Friendly Detection

- **`poi_fetcher.py`** - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• POI ‡∏à‡∏≤‡∏Å Google Maps API
  - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ POI ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô (BTS, MRT, ‡∏´‡πâ‡∏≤‡∏á, ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ‡∏Ø‡∏•‡∏Ø)
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ Distance Matrix API
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö POI ‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (30+ types)
  - ‡∏°‡∏µ Cache System ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î API Quota
  - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô CSV

### üìä ‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Files)

#### CSV Files
- **`assets_rows_merged_with_poi.csv`** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏£‡∏ß‡∏° POI (‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á Vector DB)
- **`properties_with_scores_and_features.csv`** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏° Lifestyle Score
- **`poi_results.csv`** - ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå POI ‡∏à‡∏≤‡∏Å Google Maps (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô)
- **`poi_results_enhanced.csv`** - ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå POI ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏° (‡∏£‡∏ß‡∏° Tourism & Lifestyle POI)

#### JSON Files
- **`poi_cache.json`** - Cache ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• POI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î API calls
- **`poi_cache_enhanced.json`** - Cache ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• POI ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°

### üóÑÔ∏è ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå

- **`npa_vectorstore/`** - ChromaDB Vector Database
  - ‡πÄ‡∏Å‡πá‡∏ö Embeddings ‡πÅ‡∏•‡∏∞ Metadata ‡∏Ç‡∏≠‡∏á‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Semantic Search

- **`data/`** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö (Raw Data)
  - ‡πÑ‡∏ü‡∏•‡πå CSV ‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•

- **`cache/`** - ‡πÑ‡∏ü‡∏•‡πå Cache ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß

- **`venv/`** - Python Virtual Environment

- **`__pycache__/`** - Python Bytecode Cache

### ‚öôÔ∏è ‡πÑ‡∏ü‡∏•‡πå Configuration

- **`requirements.txt`** - Python Dependencies
  - FastAPI, Uvicorn, ChromaDB, Sentence Transformers, Requests, Pandas, etc.

- **`.env`** - Environment Variables (‡πÑ‡∏°‡πà commit ‡∏•‡∏á Git)
  ```env
  MERCIL_API_KEY=your_secret_key_here
  OPENROUTER_API_KEY=your_openrouter_key
  GOOGLE_MAPS_API_KEY=your_google_maps_key
  ```

- **`.gitignore`** - ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á commit
  - venv/, __pycache__/, .env, *.pyc, cache/

### üìñ ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£

- **`README.md`** - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ)

## Technology Stack

- **FastAPI** - Web framework
- **Uvicorn** - ASGI server
- **ChromaDB** - Vector database
- **Sentence Transformers** - Embedding model
- **Python-dotenv** - Environment variables

## License

MIT
